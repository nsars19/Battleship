(this.webpackJsonpbattlship=this.webpackJsonpbattlship||[]).push([[0],{25:function(t,n,e){"use strict";e.r(n);var r,a,i,o,c=e(4),s=e(0),u=e.n(s),d=e(13),l=e.n(d),p=e(5),f=Object(p.a)(r||(r=Object(c.a)(["\n  body,\n  * {\n    padding: 0;\n    margin: 0;\n    background-color: #222831;\n    box-sizing: border-box;\n    font-family: Courier, Arial, Sans-Serif;\n  }\n\n  button {\n    margin: 10px;\n    padding: 7px;\n    border: 0 solid transparent;\n    border-radius: 2px;\n    background-color: #393e46;\n    color: #eee;\n    letter-spacing: 1.4px;\n    transition: all 0.1s ease-in-out;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    \n    &:hover {\n      background-color: #424149;\n    }\n    &:active {\n      background-color: #46454a;\n    }\n  }\n\n  img {\n    height: 32px;\n    width: 32px;\n    background: transparent;\n  }\n\n  h3 {\n    font-size: 20px;\n    text-shadow: 1px 1px 2px #111;\n    letter-spacing: 1.3px;\n  }\n"]))),h=e(3),b=e(2),g=e(17),j=p.b.div(a||(a=Object(c.a)(["\n  height: 280px;\n  width: 280px;\n  border: 1px solid #393e46;\n  margin: 15px auto;\n  display: grid;\n  grid-template-columns: repeat(10, minmax(5px, 1fr));\n  grid-template-rows: repeat(10, minmax(5px, 1fr));\n  transition: width 0.2s ease-in-out, height 0.2s ease-in-out;\n\n  @media (min-width: 540px) {\n    & {\n      width: 400px;\n      height: 400px;\n    }\n  }\n\n  @media (min-width: 768px) {\n    & {\n      width: 500px;\n      height: 500px;\n    }\n  }\n"]))),v=p.b.div(i||(i=Object(c.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  flex-direction: row-reverse;\n"]))),x=e.p+"static/media/rotate.02267353.webp",m=e(1),O=function(t){var n=t.boardStatus,e=t.shipsPlaced,r=t.rotateShip,a=t.shuffle,i=n.boardComplete,o=n.setBoardComplete;return Object(m.jsxs)(v,{style:{display:i?"none":"flex"},children:[Object(m.jsx)("button",{onClick:r,children:Object(m.jsx)("img",{src:x,alt:"rotate ship"})}),Object(m.jsx)("button",{onClick:a,children:"Place Ships"}),Object(m.jsx)("button",{onClick:function(){e&&o(!0)},children:"Start Game"})]})},S=function(t){var n=t.gameBoard,e=t.colors,r=t.boardStatus,a=r.boardComplete,i=r.setBoardComplete,o=t.shipStatus,c=o.shipsPlaced,u=o.setShipsPlaced,d=Object(s.useState)(null),l=Object(b.a)(d,2),p=l[0],f=l[1],v=t.gridState,x=v.grid,S=v.setGrid,y=null;t.isPC&&(x=t.gridState.pcGrid,S=t.gridState.setPcGrid);var k=function(t,n){t.forEach((function(t){var e=t.join("");document.getElementById(e).style.backgroundColor=n}))},C=function(t){var r=t.target.id.split("").map((function(t){return parseInt(t)})),a=n.getShipByCoord(r);if(!a)return!1;var i=Object.assign([],a.coords);k(i,e.accent),n.rotateShip(a)?(k(a.coords,e.backMain),S(n.grid)):k(i,e.backMain)},w=function(t){(function(t){if(1===t.dataTransfer.getData("id").split("").map((function(t){return parseInt(t)})).length)return!0;var r=t.dataTransfer.getData("removeShipAt").split(",").map((function(t){return parseInt(t)}));if(isNaN(r[0]))return!1;var a=n.getShipByCoord(r),i=a.coords;return y=a,n.removeShipFromShips(a),i.forEach((function(t){var e=Object(b.a)(t,2),r=e[0],a=e[1];n.grid[r][a]=""})),k(i,e.accent),!0})(t)&&(function(t){for(var r=t.target.id.split("").map((function(t){return parseInt(t)})),a=Object(b.a)(r,2),i=a[0],o=a[1],c=t.dataTransfer.getData("length"),s=[],u=0,d=0;d<c;d++)o+d>9?(u+=1,s.push([i,o-u])):s.push([i,o+d]);var l=n.placeShip.apply(n,s);return!!l&&(k(s,e.backMain),S(n.grid),f(l),!0)}(t)||(!function(t){var r=n.placeShip.apply(n,Object(h.a)(t.coords));k(r.coords,e.backMain)}(y),y=null))},P=function(t){var e=t.target.id.split("").map((function(t){return parseInt(t)}));if(n.getShipByCoord(e)){var r=n.getShipByCoord(e).coords.length;t.dataTransfer.dropEffect="move",t.dataTransfer.setData("id",t.target.id),t.dataTransfer.setData("length",r),t.dataTransfer.setData("removeShipAt",e)}},B={rotateShip:function(){if(p){var t={target:{id:p.coords[0].join("")}};C(t)}},shuffle:function(){n.grid.forEach((function(t,n){t.forEach((function(t,r){k([[r,n]],e.accent)}))})),n.placeShipsRandomly(),u(!0),S(n.grid),n.getShips().forEach((function(t){k(t.coords,e.backMain)}))},shipsPlaced:c,boardStatus:{boardComplete:a,setBoardComplete:i}};return Object(m.jsxs)(m.Fragment,{children:[!t.isPC&&Object(m.jsx)(O,Object(g.a)({},B)),function(){var n,r=t.isPC;return Object(m.jsxs)("div",{style:{flex:"1 1 auto",marginTop:"15px"},children:[(n=r?"PC's":"My",Object(m.jsxs)("h3",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",color:e.text,textAlign:"center"},children:[n," Board"]})),Object(m.jsx)(j,{"data-is-pc":r,children:x.map((function(n,i){return n.map((function(n,o){var c=t.shots.map((function(t){return t.join("")})).includes("".concat(i).concat(o));return Object(m.jsx)("div",{style:{border:"1px solid #2223",background:c?n?e.hit:e.miss:r?e.accent:n?e.backMain:e.accent,transition:"background 0.1s ease-in-out"},id:"".concat(i).concat(o),onClick:t.handleTurn,onDoubleClick:function(t){!a&&C(t)},draggable:!a,onDrop:w,onDragStart:P,onDragOver:function(t){t.preventDefault()}},"".concat(i).concat(o))}))}))})]})}()]})},y=e(11),k=function(t){var n=[],e=t;return{coords:e,isSunk:function(){if(e.length!==n.length)return!1;var t=[e.map((function(t){return t.join("")})).sort(),n.map((function(t){return t.join("")})).sort()],r=t[1];return t[0].every((function(t){return r.includes(t)}))},setCoords:function(t){for(;0!==e.length;)e.pop();e.push.apply(e,Object(h.a)(t))},length:function(){return e.length},hit:function(t){return n.push(t)},hitCoords:function(){return n}}},C=function(){var t=function(){for(var t=[],n=0;n<10;n++)t[n]=["","","","","","","","","",""];return t}(),n=[],e=[];var r=function(){t.forEach((function(n,e){n.forEach((function(n,r){t[r][e]=""}))}))},a=function(n,e){var r=Object(b.a)(n,2),a=r[0],i=r[1];t[a][i]||(t[a][i]=e)},i=function(n){var e,r=!1,a=Object(y.a)(n);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=Object(b.a)(i,2),c=o[0],s=o[1];if(t[c][s]){r=!0;break}}}catch(u){a.e(u)}finally{a.f()}return r},o=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=k(n);if(i(n))return!1;e.push(o);for(var c=0,s=n;c<s.length;c++){var u=s[c];a(u,o)}return o},c=function(t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)},s=function(n){c(n),function(n){var e,r=n.coords,a=Object(y.a)(r);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=Object(b.a)(i,2),c=o[0],s=o[1];t[c][s]=""}}catch(u){a.e(u)}finally{a.f()}}(n)},u=function(t){var n=t.coords,e=n.length,r=function(t){return t[0][0]===t[1][0]?"vertical":"horizontal"}(n),a=function(t){return Object.assign([],t).sort()[0]}(n),i=Object(b.a)(a,2),o=i[0],c=i[1],s=[];if("vertical"===r)for(var u=0,d=0;d<e;d++)o+d>9?(u+=1,s.push([o-u,c])):s.push([o+d,c]);else for(var l=0,p=0;p<e;p++)c+p>9?(l+=1,s.push([o,c-l])):s.push([o,c+p]);return s},d=function t(n){for(var e=function(){return Math.floor(10*Math.random())},r=e()>=5,a=e(),o=e(),c=[],s=0,u=0;u<n;u++)r?o+u>9?(s+=1,c.push([a,o-s])):c.push([a,o+u]):a+u>9?(s+=1,c.push([a-s,o])):c.push([a+u,o]);for(;i(c);)c=t(n);return c},l=function(){for(;e.length;)e.pop()};return{reset:function(){r(),l()},placeShipsRandomly:function(){r(),l();for(var t=0,n=[1,1,2,2,3,4,5];t<n.length;t++){var e=d(n[t]);o.apply(void 0,Object(h.a)(e))}},generatePositions:d,getShipByCoord:function(n){var e=Object(b.a)(n,2),r=e[0],a=e[1],i=t[r][a];return i||!1},rotateShip:function(t){if(1===t.coords.length)return!0;var n=t.coords,e=u(t);return s(t),o.apply(void 0,Object(h.a)(e))?(t.setCoords(e),!0):(o.apply(void 0,Object(h.a)(n)),!1)},placeShip:o,receiveAttack:function(e){var r=Object(b.a)(e,2),a=r[0],i=r[1];t[a][i]?t[a][i].hit(e):function(t){n.push(t)}(e)},allSunk:function(){return e.every((function(t){return t.isSunk()}))},grid:t,removeShipFromShips:c,spotsTaken:i,getShips:function(){return e},getMisses:function(){return n}}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=C(),e=[],r=function(){return e.flatMap((function(t){return t.join("")}))},a=function(t){return e.push(t)},i=function(t,n){return!r().includes(t.join(""))&&(n.receiveAttack(t),a(t),!0)},o=function(){for(var t=function(){return Math.floor(10*Math.random())},n=[t(),t()];r().includes(n.join(""));)n=[t(),t()];return n};function c(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===t.length)return e;var r=t.pop(),a=n.filter((function(t){return t.hitCoords().includes(r)}))[0];return a&&e.push(r),c(t,n,e)}var s=function(t){for(var n=[],e={},r=0,a=t.length;r<a;r++){var i=JSON.stringify(t[r]);e[i]||(n.push(t[r]),e[i]=!0)}return n},u=function(t){var n=Object.assign([],e),r=t.getShips(),a=c(n,r),i=a[0],u=r.filter((function(t){return t.hitCoords().includes(i)}))[0];if(!i||u.isSunk())return o();var d=[];a.sort((function(t,n){var e=Object(b.a)(t,2),r=e[0],a=e[1],i=Object(b.a)(n,2),o=i[0],c=i[1];r===o&&d.push.apply(d,Object(h.a)(new Set([[r,a+1],[r,a-1],[o,c+1],[o,c-1]]))),a===c&&d.push.apply(d,Object(h.a)(new Set([[r+1,a],[r-1,a],[o+1,c],[o-1,c]])))}));var l=s(d).filter((function(t){return!a.map((function(t){return t.join("")})).includes(t.join(""))}));if(0!==l.length)return l.filter((function(t){return t[0]>=0&&t[1]>=0&&t[0]<10&&t[1]<10}));var p=Object(b.a)(a[0],2),f=p[0],g=p[1];return d.push([f+1,g],[f-1,g],[f,g+1],[f,g-1]),d.filter((function(t){return t[0]>=0&&t[1]>=0&&t[0]<10&&t[1]<10})).sort()},d=function(n,e){return i(t?o():n,e)},l=function(){for(;e.length;)e.pop()},p=function(){l(),n.reset()};return{reset:p,attack:d,attackList:e,board:n,generateTileGuesses:u}},P=p.b.div(o||(o=Object(c.a)(["\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  h1 {\n    color: #eee;\n    letter-spacing: 1.3px;\n    text-shadow: 1px 1px 2px #222;\n    font-size: 2.5em;\n    margin-top: 90px;\n  }\n\n  button {\n    padding: 10px;\n    margin-top: 30px;\n    width: 180px;\n    font-size: 18px;\n    font-weight: bold;\n    letter-spacing: 1.3px;\n  }\n"]))),B=function(t){var n=t.winner,e=t.resetGame;return Object(m.jsxs)(P,{children:[Object(m.jsxs)("h1",{children:[n,"PC"===n?" wins!":" win!"]}),Object(m.jsx)("button",{onClick:e,children:"Play Again"})]})},M=w(),E=w(!0);E.board.placeShipsRandomly();var D,T=function(){var t=Object(s.useState)(M.board.grid),n=Object(b.a)(t,2),e=n[0],r=n[1],a=Object(s.useState)(E.board.grid),i=Object(b.a)(a,2),o=i[0],c=i[1],u=Object(s.useState)(!1),d=Object(b.a)(u,2),l=d[0],p=d[1],f=Object(s.useState)(!1),g=Object(b.a)(f,2),j=g[0],v=g[1],x=Object(s.useState)(M.attackList),O=Object(b.a)(x,2),y=O[0],k=O[1],C=Object(s.useState)(E.attackList),w=Object(b.a)(C,2),P=w[0],D=w[1],T=Object(s.useState)(null),A=Object(b.a)(T,2),G=A[0],I=A[1],L={backMain:"#222831",backAccent:"#393E46",text:"#EEE",accent:"#00ADB5",hit:"#803434",miss:"#8a8a8a"},F=function(t){var n=t.target.id.split("").map((function(t){return parseInt(t)}));"true"===t.target.parentElement.attributes["data-is-pc"].value&&(M.board.allSunk()?I("PC"):E.board.allSunk()?I("You"):M.attack(n,E.board)&&(k([].concat(Object(h.a)(y),[M.attackList[M.attackList.length-1]])),E.attack(null,M.board),D([].concat(Object(h.a)(P),[E.attackList[E.attackList.length-1]]))))},z=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(m.jsx)(S,{gameBoard:t?E.board:M.board,gridState:t?{pcGrid:o,setPcGrid:c}:{grid:e,setGrid:r},isPC:t,shots:t?y:P,colors:L,boardStatus:{boardComplete:l,setBoardComplete:p},shipStatus:{shipsPlaced:j,setShipsPlaced:v},handleTurn:F,winner:G})};return Object(m.jsx)(m.Fragment,{children:G&&Object(m.jsx)(B,{winner:G,resetGame:function(){M.reset(),E.reset(),E.board.placeShipsRandomly(),I(null),r(M.board.grid),c(E.board.grid),p(!1),v(!1),k(M.attackList),D(E.attackList)}})||l&&Object(m.jsxs)("div",{style:{display:"flex",flexFlow:"row wrap"},children:[z(),z(!0)]})||z()})},A=Object(p.b)(T)(D||(D=Object(c.a)(["\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n"])));l.a.render(Object(m.jsxs)(u.a.StrictMode,{children:[Object(m.jsx)(f,{}),Object(m.jsx)(A,{})]}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.1a770233.chunk.js.map