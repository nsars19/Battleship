(this.webpackJsonpbattlship=this.webpackJsonpbattlship||[]).push([[0],{25:function(t,n,e){"use strict";e.r(n);var r,a,i,o=e(4),c=e(0),s=e.n(c),u=e(13),l=e.n(u),d=e(5),p=Object(d.a)(r||(r=Object(o.a)(["\n  body,\n  * {\n    padding: 0;\n    margin: 0;\n    background-color: #222831;\n    box-sizing: border-box;\n    font-family: Courier, Arial, Sans-Serif;\n  }\n\n  button {\n    margin: 10px;\n    padding: 7px;\n    border: 0 solid transparent;\n    border-radius: 2px;\n    background-color: #393e46;\n    color: #eee;\n    letter-spacing: 1.4px;\n    transition: all 0.1s ease-in-out;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    \n    &:hover {\n      background-color: #424149;\n    }\n    &:active {\n      background-color: #46454a;\n    }\n  }\n\n  img {\n    height: 32px;\n    width: 32px;\n    background: transparent;\n  }\n\n  h3 {\n    font-size: 20px;\n    text-shadow: 1px 1px 2px #111;\n    letter-spacing: 1.3px;\n  }\n"]))),f=e(3),h=e(2),b=e(17),g=d.b.div(a||(a=Object(o.a)(["\n  height: 280px;\n  width: 280px;\n  margin: 15px auto;\n  display: grid;\n  grid-template-columns: repeat(10, minmax(5px, 1fr));\n  grid-template-rows: repeat(10, minmax(5px, 1fr));\n  transition: width 0.2s ease-in-out, height 0.2s ease-in-out;\n\n  @media (min-width: 540px) {\n    & {\n      width: 400px;\n      height: 400px;\n    }\n  }\n\n  @media (min-width: 768px) {\n    & {\n      width: 500px;\n      height: 500px;\n    }\n  }\n"]))),j=d.b.div(i||(i=Object(o.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  flex-direction: row-reverse;\n"]))),v=e.p+"static/media/rotate.02267353.webp",x=e(1),m=function(t){var n=t.boardStatus,e=t.shipsPlaced,r=t.rotateShip,a=t.shuffle,i=n.boardComplete,o=n.setBoardComplete;return Object(x.jsxs)(j,{style:{display:i?"none":"flex"},children:[Object(x.jsx)("button",{onClick:r,children:Object(x.jsx)("img",{src:v,alt:"rotate ship"})}),Object(x.jsx)("button",{onClick:a,children:"Place Ships"}),Object(x.jsx)("button",{onClick:function(){e&&o(!0)},children:"Start Game"})]})},O=function(t){var n=t.gameBoard,e=t.colors,r=t.boardStatus,a=r.boardComplete,i=r.setBoardComplete,o=t.shipStatus,s=o.shipsPlaced,u=o.setShipsPlaced,l=Object(c.useState)(null),d=Object(h.a)(l,2),p=d[0],j=d[1],v=t.gridState,O=v.grid,S=v.setGrid,y=null;t.isPC&&(O=t.gridState.pcGrid,S=t.gridState.setPcGrid);var k=function(t,n){t.forEach((function(t){var e=t.join("");document.getElementById(e).style.backgroundColor=n}))},C=function(t){var r=t.target.id.split("").map((function(t){return parseInt(t)})),a=n.getShipByCoord(r);if(!a)return!1;var i=Object.assign([],a.coords);k(i,e.accent),n.rotateShip(a)?(k(a.coords,e.backMain),S(n.grid)):k(i,e.backMain)},w=function(t){(function(t){if(1===t.dataTransfer.getData("id").split("").map((function(t){return parseInt(t)})).length)return!0;var r=t.dataTransfer.getData("removeShipAt").split(",").map((function(t){return parseInt(t)}));if(isNaN(r[0]))return!1;var a=n.getShipByCoord(r),i=a.coords;return y=a,n.removeShipFromShips(a),i.forEach((function(t){var e=Object(h.a)(t,2),r=e[0],a=e[1];n.grid[r][a]=""})),k(i,e.accent),!0})(t)&&(function(t){for(var r=t.target.id.split("").map((function(t){return parseInt(t)})),a=Object(h.a)(r,2),i=a[0],o=a[1],c=t.dataTransfer.getData("length"),s=[],u=0,l=0;l<c;l++)o+l>9?(u+=1,s.push([i,o-u])):s.push([i,o+l]);var d=n.placeShip.apply(n,s);return!!d&&(k(s,e.backMain),S(n.grid),j(d),!0)}(t)||(!function(t){var r=n.placeShip.apply(n,Object(f.a)(t.coords));k(r.coords,e.backMain)}(y),y=null))},M=function(t){var e=t.target.id.split("").map((function(t){return parseInt(t)}));if(n.getShipByCoord(e)){var r=n.getShipByCoord(e).coords.length;t.dataTransfer.dropEffect="move",t.dataTransfer.setData("id",t.target.id),t.dataTransfer.setData("length",r),t.dataTransfer.setData("removeShipAt",e)}},P={rotateShip:function(){if(p){var t={target:{id:p.coords[0].join("")}};C(t)}},shuffle:function(){n.grid.forEach((function(t,n){t.forEach((function(t,r){k([[r,n]],e.accent)}))})),n.placeShipsRandomly(),u(!0),S(n.grid),n.getShips().forEach((function(t){k(t.coords,e.backMain)}))},shipsPlaced:s,boardStatus:{boardComplete:a,setBoardComplete:i}};return Object(x.jsxs)(x.Fragment,{children:[!t.isPC&&Object(x.jsx)(m,Object(b.a)({},P)),function(){var n,r=t.isPC;return Object(x.jsxs)("div",{style:{flex:"1 1 auto",marginTop:"15px"},children:[(n=r?"PC's":"My",Object(x.jsxs)("h3",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",color:e.text,textAlign:"center"},children:[n," Board"]})),Object(x.jsx)(g,{"data-is-pc":r,children:O.map((function(n,i){return n.map((function(n,o){var c=t.shots.map((function(t){return t.join("")})).includes("".concat(i).concat(o));return Object(x.jsx)("div",{style:{border:"1px solid #2223",background:c?n?e.hit:e.miss:r?e.accent:n?e.backMain:e.accent,transition:"background 0.1s ease-in-out"},id:"".concat(i).concat(o),onClick:t.handleTurn,onDoubleClick:C,draggable:!a,onDrop:w,onDragStart:M,onDragOver:function(t){t.preventDefault()}},"".concat(i).concat(o))}))}))})]})}()]})},S=e(11),y=function(t){var n=[],e=t;return{coords:e,isSunk:function(){if(e.length!==n.length)return!1;var t=[e.map((function(t){return t.join("")})).sort(),n.map((function(t){return t.join("")})).sort()],r=t[1];return t[0].every((function(t){return r.includes(t)}))},setCoords:function(t){for(;0!==e.length;)e.pop();e.push.apply(e,Object(f.a)(t))},length:function(){return e.length},hit:function(t){return n.push(t)},hitCoords:function(){return n}}},k=function(){var t=function(){for(var t=[],n=0;n<10;n++)t[n]=["","","","","","","","","",""];return t}(),n=[],e=[];var r=function(n,e){var r=Object(h.a)(n,2),a=r[0],i=r[1];t[a][i]||(t[a][i]=e)},a=function(n){var e,r=!1,a=Object(S.a)(n);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=Object(h.a)(i,2),c=o[0],s=o[1];if(t[c][s]){r=!0;break}}}catch(u){a.e(u)}finally{a.f()}return r},i=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=y(n);if(a(n))return!1;e.push(o);for(var c=0,s=n;c<s.length;c++){var u=s[c];r(u,o)}return o},o=function(t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)},c=function(n){o(n),function(n){var e,r=n.coords,a=Object(S.a)(r);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=Object(h.a)(i,2),c=o[0],s=o[1];t[c][s]=""}}catch(u){a.e(u)}finally{a.f()}}(n)},s=function(t){var n=t.coords,e=n.length,r=function(t){return t[0][0]===t[1][0]?"vertical":"horizontal"}(n),a=function(t){return Object.assign([],t).sort()[0]}(n),i=Object(h.a)(a,2),o=i[0],c=i[1],s=[];if("vertical"===r)for(var u=0,l=0;l<e;l++)o+l>9?(u+=1,s.push([o-u,c])):s.push([o+l,c]);else for(var d=0,p=0;p<e;p++)c+p>9?(d+=1,s.push([o,c-d])):s.push([o,c+p]);return s},u=function t(n){for(var e=function(){return Math.floor(10*Math.random())},r=e()>=5,i=e(),o=e(),c=[],s=0,u=0;u<n;u++)r?o+u>9?(s+=1,c.push([i,o-s])):c.push([i,o+u]):i+u>9?(s+=1,c.push([i-s,o])):c.push([i+u,o]);for(;a(c);)c=t(n);return c};return{placeShipsRandomly:function(){t.forEach((function(n,e){n.forEach((function(n,r){t[r][e]=""}))})),function(){for(;e.length;)e.pop()}();for(var n=0,r=[1,1,2,2,3,4,5];n<r.length;n++){var a=u(r[n]);i.apply(void 0,Object(f.a)(a))}},generatePositions:u,getShipByCoord:function(n){var e=Object(h.a)(n,2),r=e[0],a=e[1],i=t[r][a];return i||!1},rotateShip:function(t){if(1===t.coords.length)return!0;var n=t.coords,e=s(t);return c(t),i.apply(void 0,Object(f.a)(e))?(t.setCoords(e),!0):(i.apply(void 0,Object(f.a)(n)),!1)},placeShip:i,receiveAttack:function(e){var r=Object(h.a)(e,2),a=r[0],i=r[1];t[a][i]?t[a][i].hit(e):function(t){n.push(t)}(e)},allSunk:function(){return t.flat().filter((function(t){return t})).every((function(t){return t.isSunk()}))},grid:t,removeShipFromShips:o,spotsTaken:a,getShips:function(){return e},getMisses:function(){return n}}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],e=function(){return n.flatMap((function(t){return t.join("")}))},r=function(t){return n.push(t)},a=function(t,n){return!e().includes(t.join(""))&&(n.receiveAttack(t),r(t),!0)},i=function(){for(var t=function(){return Math.floor(10*Math.random())},n=[t(),t()];e().includes(n.join(""));)n=[t(),t()];return n};function o(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===t.length)return e;var r=t.pop(),a=n.filter((function(t){return t.hitCoords().includes(r)}))[0];return a&&e.push(r),o(t,n,e)}var c=function(t){for(var n=[],e={},r=0,a=t.length;r<a;r++){var i=JSON.stringify(t[r]);e[i]||(n.push(t[r]),e[i]=!0)}return n},s=function(t){var r=Object.assign([],n),a=t.getShips(),s=o(r,a),u=s[0],l=a.filter((function(t){return t.hitCoords().includes(u)}))[0];if(!u||l.isSunk())return i();var d=[];s.sort((function(t,n){var e=Object(h.a)(t,2),r=e[0],a=e[1],i=Object(h.a)(n,2),o=i[0],c=i[1];r===o&&d.push.apply(d,Object(f.a)(new Set([[r,a+1],[r,a-1],[o,c+1],[o,c-1]]))),a===c&&d.push.apply(d,Object(f.a)(new Set([[r+1,a],[r-1,a],[o+1,c],[o-1,c]])))}));var p=c(d).filter((function(t){return!s.map((function(t){return t.join("")})).includes(t.join(""))}));if(0!==p.length)return p.filter((function(t){return t[0]>=0&&t[1]>=0&&t[0]<10&&t[1]<10}));var b=Object(h.a)(s[0],2),g=b[0],j=b[1];d.push([g+1,j],[g-1,j],[g,j+1],[g,j-1]);var v=d.filter((function(t){return t[0]>=0&&t[1]>=0&&t[0]<10&&t[1]<10})).filter((function(t){return!e().includes(t.join(""))})).sort();return v.length?v:i()},u=function(t){var n=s(t),e=Math.floor(Math.random()*n.length),r="number"===typeof n[0]||n[e];r=i();for(var o=!1;!o;)o=!0===a(r,t);return o},l=function(n,e){return t?u(e):a(n,e)};return{playerAttack:a,attack:l,attackList:n,board:k(),generateTileGuesses:s}},w=C(),M=C(!0);M.board.placeShipsRandomly();var P,B=function(){var t=Object(c.useState)(w.board.grid),n=Object(h.a)(t,2),e=n[0],r=n[1],a=Object(c.useState)(M.board.grid),i=Object(h.a)(a,2),o=i[0],s=i[1],u=Object(c.useState)(!1),l=Object(h.a)(u,2),d=l[0],p=l[1],b=Object(c.useState)(!1),g=Object(h.a)(b,2),j=g[0],v=g[1],m=Object(c.useState)(w.attackList),S=Object(h.a)(m,2),y=S[0],k=S[1],P=Object(c.useState)(M.attackList),B=Object(h.a)(P,2),E=B[0],T=B[1],D=Object(c.useState)(null),A=Object(h.a)(D,2),I=A[0],L=A[1],G={backMain:"#222831",backAccent:"#393E46",text:"#EEE",accent:"#00ADB5",hit:"#803434",miss:"#8a8a8a"},z=function(){w=C(),M=C(!0),r(w.board.grid),s(M.board.grid),p(!1),v(!1),k(w.attackList),T(M.attackList),L(null)},F=function(t){w.board.allSunk()&&L("PC"),M.board.allSunk()&&L("You");var n=t.target.id.split("").map((function(t){return parseInt(t)}));"true"===t.target.parentElement.attributes["data-is-pc"].value&&w.attack(n,M.board)&&(k([].concat(Object(f.a)(y),[w.attackList[w.attackList.length-1]])),M.attack(null,w.board),T([].concat(Object(f.a)(E),[M.attackList[M.attackList.length-1]])))},N=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(x.jsx)(O,{gameBoard:t?M.board:w.board,gridState:t?{pcGrid:o,setPcGrid:s}:{grid:e,setGrid:r},isPC:t,shots:t?y:E,colors:G,boardStatus:{boardComplete:d,setBoardComplete:p},shipStatus:{shipsPlaced:j,setShipsPlaced:v},handleTurn:F,winner:I})};return I?Object(x.jsxs)("div",{style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(x.jsxs)("h1",{style:{color:G.text,letterSpacing:"1.3px",textShadow:"1px 1px 2px #222",fontSize:"2.5em",marginTop:"90px"},children:[I,"PC"===I?" wins!":" win!"]}),Object(x.jsx)("button",{onClick:z,style:{padding:"10px",marginTop:"30px",width:"180px",fontSize:"18px",fontWeight:"bold",letterSpacing:"1.3px"},children:"Play Again"})]}):d?Object(x.jsxs)("div",{style:{display:"flex",flexFlow:"row wrap"},children:[N(),N(!0)]}):N()},E=Object(d.b)(B)(P||(P=Object(o.a)(["\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n"])));l.a.render(Object(x.jsxs)(s.a.StrictMode,{children:[Object(x.jsx)(p,{}),Object(x.jsx)(E,{})]}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.8898de18.chunk.js.map